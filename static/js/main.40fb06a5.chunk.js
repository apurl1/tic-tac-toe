(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{15:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(11),r=n.n(s),i=n(3),u=n(4),c=n(8),l=n(6),p=n(5),m=n(14),b=function(e){return o.a.createElement("button",{className:"square",onClick:e.onClick},e.value)},h=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"createBoard",value:function(e,t){for(var n=[],a=0,s=0;s<e;s+=1){for(var r=[],i=0;i<t;i+=1)r.push(this.renderSquare(a++));n.push(o.a.createElement("div",{key:s,className:"board-row"},r))}return n}},{key:"renderSquare",value:function(e){var t=this;return o.a.createElement(b,{key:e,value:this.props.squares[e],onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return o.a.createElement("div",null,this.createBoard(3,3))}}]),n}(o.a.Component),d=n(1),f=n.n(d),C=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).newRound=function(e){var t=null===e?"Tie game!":"Player ".concat(e," won!");!1===a.props.isRoomCreator&&a.gameOver?(f.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Waiting for a new round...",confirmButtonColor:"rgb(208,33,41)",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),a.turn="X"):a.props.isRoomCreator&&a.gameOver&&f.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Continue Playing?",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",cancelButtonColor:"#aaa",cancelButtonText:"Nope",confirmButtonText:"Yeet",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class",cancelButton:"button-class"}}).then((function(e){e.value?a.props.pubnub.publish({message:{reset:!0},channel:a.props.gameChannel}):a.props.pubnub.publish({message:{endGame:!0},channel:a.props.gameChannel})}))},a.announceWinner=function(e){var t={X:a.state.xScore,O:a.state.oScore};"X"===e?(t.X+=1,a.setState({xScore:t.X})):(t.O+=1,a.setState({oScore:t.O})),a.gameOver=!0,a.newRound(e)},a.checkForWinner=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<t.length;n+=1){var o=Object(m.a)(t[n],3),s=o[0],r=o[1],i=o[2];if(e[s]&&e[s]===e[r]&&e[s]===e[i])return void a.announceWinner(e[s])}a.counter++,9===a.counter&&(a.gameOver=!0,a.newRound(null))},a.publishMove=function(e,t){var n=a.state.squares;n[e]=t,a.turn="X"===n[e]?"O":"X",a.setState({squares:n,whosTurn:!a.state.whosTurn}),a.checkForWinner(n)},a.onMakeMove=function(e){var t=a.state.squares;t[e]||a.turn!==a.props.piece||(t[e]=a.props.piece,a.setState({squares:t,whosTurn:!a.state.whosTurn}),a.turn="X"===a.turn?"O":"X",a.props.pubnub.publish({message:{index:e,piece:a.props.piece,turn:a.turn},channel:a.props.gameChannel}),a.checkForWinner(t))},a.state={squares:Array(9).fill(""),xScore:0,oScore:0,whosTurn:a.props.myTurn},a.turn="X",a.gameOver=!1,a.counter=0,a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.pubnub.getMessage(this.props.gameChannel,(function(t){t.message.turn===e.props.piece?e.publishMove(t.message.index,t.message.piece):t.message.reset?(e.setState({squares:Array(9).fill(""),whosTurn:e.props.myTurn}),e.turn="X",e.gameOver=!1,e.counter=0,f.a.close()):t.message.endGame&&(f.a.close(),e.props.endGame())}))}},{key:"render",value:function(){var e,t=this;return e="".concat(this.state.whosTurn?"Your turn":"Opponent's turn"),o.a.createElement("div",{className:"game"},o.a.createElement("div",{className:"board"},o.a.createElement(h,{squares:this.state.squares,onClick:function(e){return t.onMakeMove(e)}}),o.a.createElement("p",{className:"status-info"},e)),o.a.createElement("div",{className:"scores-container"},o.a.createElement("div",null,o.a.createElement("p",null,"Player X: ",this.state.xScore," ")),o.a.createElement("div",null,o.a.createElement("p",null,"Player O: ",this.state.oScore," "))))}}]),n}(o.a.Component),g=n(12),v=n.n(g),y=n(13),O=n.n(y),w=(n(39),function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onPressCreate=function(e){a.roomId=O.a.generate().substring(0,5),a.lobbyChannel="tictactoelobby--"+a.roomId,a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),f.a.fire({position:"top",allowOutsideClick:!1,title:"Share this room ID with your friend",text:a.roomId,width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),a.setState({piece:"X",isRoomCreator:!0,isDisabled:!0,myTurn:!0})},a.onPressJoin=function(e){f.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!1,popup:"popup-class",confirmButton:"join-button-class ",cancelButton:"join-button-class"}}).then((function(e){e.value&&a.joinRoom(e.value)}))},a.joinRoom=function(e){a.roomId=e,a.lobbyChannel="tictactoelobby--"+a.roomId,a.pubnub.hereNow({channels:[a.lobbyChannel]}).then((function(e){e.totalOccupancy<2?(a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),a.setState({piece:"O"}),a.pubnub.publish({message:{notRoomCreator:!0},channel:a.lobbyChannel})):f.a.fire({position:"top",allowOutsideClick:!1,title:"Error",text:"Game in progress. Try another room.",width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}})})).catch((function(e){console.log(e)}))},a.endGame=function(){a.setState({piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1}),a.lobbyChannel=null,a.gameChannel=null,a.roomId=null,a.pubnub.unsubscribe({channels:[a.lobbyChannel,a.gameChannel]})},a.pubnub=new v.a({publishKey:"pub-c-4b231eda-618f-4ef1-bdcd-bccfe45c94c5",subscribeKey:"sub-c-31a1c966-be52-11ea-bcf8-42a3de10f872"}),a.state={piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1},a.lobbyChannel=null,a.gameChannel=null,a.roomId=null,a.pubnub.init(Object(c.a)(a)),a}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,(function(t){t.message.notRoomCreator&&(e.gameChannel="tictactoegame--"+e.roomId,e.pubnub.subscribe({channels:[e.gameChannel]}),e.setState({isPlaying:!0}),f.a.close())}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"title"},o.a.createElement("p",null,"Tic Tac Toe")),!this.state.isPlaying&&o.a.createElement("div",{className:"game"},o.a.createElement("div",{className:"board"},o.a.createElement(h,{squares:0,onClick:function(e){return null}}),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{className:"create-button ",disabled:this.state.isDisabled,onClick:function(t){return e.onPressCreate()}}," Create"),o.a.createElement("button",{className:"join-button",onClick:function(t){return e.onPressJoin()}}," Join")))),this.state.isPlaying&&o.a.createElement(C,{pubnub:this.pubnub,gameChannel:this.gameChannel,piece:this.state.piece,isRoomCreator:this.state.isRoomCreator,myTurn:this.state.myTurn,xUsername:this.state.xUsername,oUsername:this.state.oUsername,endGame:this.endGame}))}}]),n}(a.Component));r.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.40fb06a5.chunk.js.map